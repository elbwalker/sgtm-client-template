<!doctype html><html lang="de">
<head>
<title>DEMO: using walker.js ssGTM client</title>
<!-- 
    NOTE: YOU COULD LOAD A LOCAL FIRST PARTY COPY OF WALKER.JS OR EXTERNAL ONE LIKE THIS: 
 
    <script async src="/walker.js"></script>
    
    TIPP: YOU CAN OPTIONALLY LET THE INIT SCRIPT LOAD walker.js FROM ANY PATH BY USING 
    THE data-walkerpath ATTRIBUTE WHEN LOADING THE SAMPLE SCCRIPT. SET data-version AS 
    WELL TO FORWARD TO walker.js SCRIPT LIKE DEMONSTRATED HERE. SEE EXAMPLE INIT 
    SCRIPT CODE FOR MORE OPTIONS.
-->
<script async src="walker-init.js?v=9" 
  data-endpoint="https://httpbin.org/anything" 
  data-sendimg="false" 
  data-base64="false" 
  data-version="3"
  data-walkerpath="https://cdn.jsdelivr.net/npm/@elbwalker/walker.js@1.5.3/dist/walker.js">
</script>

<style>
    body {font-family:arial;color:#fff;line-height:1.4em;background:#222;text-align:center}
    #cnt {position: relative; max-width:1000px; margin: 10px auto; text-align:left; padding:1em}
    a, h1, h2, h3, h4 {color:#beffb7}
    div[data-elb="call_to_action"]{padding:2em;background:#333}   
</style>
</head>
<body>
<div id="cnt">

<div data-elbglobals="language:de"></div>
<div data-elbcontext="some_property:42">
    
<h1><small>walker.js + ssGTM</h1>
<p>Open console to see all events that are generated by walker.js. All hits are sent to a custom endpoint. 
No external ressources linked: find tracking initialization code in <a target="_blank" 
href="walker-init.js">walker-init.js</a> to see how it works. A (simple) example for client id and 
session handling can be found there as well. It demonstrates how to to collect events that can 
populate a GA4 property.</p>

<p>NOTE: this example sends events to <a href="https://httpbin.org/anything">https://httpbin.org/anything</a> 
instead of a real ssGTM endpoint. Change the <em>data-endpoint</em> attribute to your own server and 
endpoint URL where the elbwalker client is listening.</p>

<h2>About Consent</h2>
<p>This example "assumes" consent and uses localStorage and sessionStorage to persist client id, 
session id and a session counter. You can see consistent values for hash and device in 
the <em>user</em> array plus session information in the <em>globals</em> when you reload this page. 
In order to simulate missing consent, add a parameter <em>noconsent</em> to the url of this page 
(<a target="_bÃ¶ank" href="?noconsent">open page without consent</a> in separate tab). There will be 
no hash or device id in the <em>user</em> section.</p>

<p><b>NOTE:</b> there are comments on how to handle consent and forwand it to ssGTM in the script code.  
The client template in ssGTM allows you to use different ways to control session and user data.</p>

<h2>Some Links</h2>
<ul>
<li>send event via attribute: <a data-elb="helloworld" data-elbaction="click" href="#">hello world!</a></li>
<li>send virtual "page view" using JavaScript: <a href="#" onclick="elb('page view', { id: '/test/virtual/path1', title: 'Virtual Page 1'}, 'click', {some_property: 14} );">elb('page view', ...)</a></li>    
<li>e-commerce: send "order complete" as "purchase" to GA4 (see code): <a href="#" onclick="sendPurchase(); return false;">send purchase</a></li>    
</ul>
<p style="margin-bottom:100%">scroll down to show demo promo element with visibility event...</p>

<div data-elb="someblock" data-elbaction="visible">
<h2 data-elb-someblock="name:#textContent">this is a promo block example</h2>
<p data-elb-someblock="category:internal promo">Call! To! Action!</p>
</div>

</div> <!--elbcontext -->
</div> <!--cnt -->
</body>
<script>
function sendPurchase() {
  elb("order complete", 
    {transaction_id:"0rd3r1d",
    net_value:72,
    currency:"EUR",
    shipping:8,
    tax:6.4,
    value:86.4,
    }, 
    "load", 
    {event_name: "purchase"}, 
    [{
      "type":"product",
      "data":{
        item_name:"Everyday Ruck Snack",
        item_id:"sample01",
        item_variant:"black",
        quantity:1,
        price:220,
        currency:"EUR"
      }
    },
    {
      "type":"product",
      "data":{
        item_name:"Cool Cap",
        item_id:"sample02",
        item_variant:"green",
        quantity:1,
        price:39,
        currency:"EUR"
      }
    }]
  );  
}  
</script>
</html>